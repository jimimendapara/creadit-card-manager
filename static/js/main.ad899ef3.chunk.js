(this["webpackJsonpcreadit-card-manager"]=this["webpackJsonpcreadit-card-manager"]||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);var c=t(0),r=t(11),n=t.n(r),i=t(24),d=(t(26),t(55),t(10)),s=t(16),o=t(14),l=t(15),u=t.n(l);function m(e){var a={},t=u.a.number(e.cardNumber);return t.expirationDate=u.a.expirationDate(e.cardExpiration),t.cvv=u.a.cvv(e.cardSecurityCode),t.cardholderName=u.a.cardholderName(e.cardName),a.show=!0,a.variant="danger",a.message="An unknown error occured. Please try again later",a.cname=!1,a.cnumber=!1,a.cexp=!1,a.ccvv=!1,null!==e.cardSecurityCode&&e.cardSecurityCode.trim()?t.cvv.isValid?a.ccvv=!0:a.message="Credit card CVC is invalid":a.message="Credit card CVC is not complete",null!==e.cardExpiration&&e.cardExpiration.trim()?t.expirationDate.isValid?a.cexp=!0:a.message="Credit card expiration date is invalid":a.message="Credit card expiration date is not complete",null!==e.cardNumber&&e.cardNumber.trim()?t.isValid?a.cnumber=!0:a.message="Credit card number is invalid":a.message="Credit card number is not complete",null!==e.cardName&&e.cardName.trim()?t.cardholderName.isValid?a.cname=!0:a.message="Cardholder name is invalid":a.message="Cardholder name is not complete",a.cname&&a.cnumber&&a.cexp&&a.ccvv&&(a.variant="success",a.message="Credit Card is valid"),a}var j=t(40),b=t(41),v=t(42),p=t.n(v).a.create({baseURL:"http://ec2-52-62-90-174.ap-southeast-2.compute.amazonaws.com:8080/api",headers:{"Content-type":"application/json"}}),h=new(function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,[{key:"getAll",value:function(){return p.get("/cards")}},{key:"get",value:function(e){return p.get("/cards/".concat(e))}},{key:"create",value:function(e){return p.post("/cards",e)}},{key:"update",value:function(e,a){return p.put("/cards/".concat(e),a)}},{key:"delete",value:function(e){return p.delete("/cards/".concat(e))}}]),e}()),x=function(e){var a=Object(c.useState)({cardName:"",cardNumber:"",cardExpiration:"",cardSecurityCode:"",focus:""}),t=Object(d.a)(a,2),r=t[0],n=t[1],i=Object(c.useState)({}),l=Object(d.a)(i,2),u=l[0],j=l[1];return{handleChange:function(e){var a=e.target,t=a.name,c=a.value;n(Object(o.a)(Object(o.a)({},r),{},Object(s.a)({},t,c)))},handleFocus:function(e){n(Object(o.a)(Object(o.a)({},r),{},{focus:"cardSecurityCode"===e.target.name?"cvc":e.target.name}))},handleSubmit:function(e){e.preventDefault(),j(m(r)),"success"===m(r).variant&&h.create(r).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}))},values:r,errors:u}},O=t(107),C=t(104),f=t(44),g=t(105),N=t(106),y=(t(88),t(43)),S=(t(94),t(4)),E=function(e){var a=x(),t=a.handleChange,c=a.handleFocus,r=a.handleSubmit,n=a.values,i=a.errors;return Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"box justify-content-center align-items-center",children:[Object(S.jsx)("div",{className:"creditCard",children:Object(S.jsx)(y.a,{cvc:n.cardSecurityCode,expiry:n.cardExpiration,focused:n.focus,name:n.cardName,number:n.cardNumber})}),Object(S.jsx)("div",{className:"formDiv",children:Object(S.jsxs)(O.a,{onSubmit:r,children:[Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{className:"topmargin",type:"number",id:"cardNumber","data-testid":"cardNumber",name:"cardNumber",placeholder:"Card Number",value:n.cardNumber,onChange:t,onFocus:c,isValid:i.cnumber})}),Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{type:"text",id:"cardName","data-testid":"cardName",name:"cardName",placeholder:"Cardholder Name",value:n.cardName,onChange:t,onFocus:c,isValid:i.cname})}),Object(S.jsxs)(C.a,{children:[Object(S.jsx)(f.a,{children:Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{type:"text",id:"cardExpiration","data-testid":"cardExpiration",name:"cardExpiration",placeholder:"Expiration Date",value:n.cardExpiration,onChange:t,onFocus:c,isValid:i.cexp})})}),Object(S.jsx)(f.a,{children:Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{type:"number",id:"cardSecurityCode","data-testid":"cardSecurityCode",name:"cardSecurityCode",placeholder:"Security Code",value:n.cardSecurityCode,onChange:t,onFocus:c,isValid:i.ccvv})})})]}),Object(S.jsx)(g.a,{size:"block","data-testid":"validateButton",id:"validateButton",type:"submit",children:"Validate"})]})}),Object(S.jsx)(N.a,{id:"alertMessage","data-testid":"alertMessage",variant:i.variant,show:i.show,children:i.message})," "]})})};var k=function(e){var a=Object(c.useState)({cards:[],currentCard:null,currentIndex:-1}),t=Object(d.a)(a,2),r=t[0],n=t[1];function i(){h.getAll().then((function(e){n({cards:e.data})})).catch((function(e){console.log(e)}))}return Object(c.useEffect)((function(){i()}),[]),Object(S.jsx)("div",{className:"ml-5 mr-5",children:r&&r.cards.map((function(e,a){return Object(S.jsxs)("div",{className:"row border-bottom pb-2 pt-2",children:[Object(S.jsx)("div",{className:"col-sm-3",children:e.cardName}),Object(S.jsx)("div",{className:"col-sm-3",children:e.cardNumber}),Object(S.jsx)("div",{className:"col-sm-3",children:e.cardExpiration}),Object(S.jsx)("div",{className:"col-sm-3",children:Object(S.jsx)(g.a,{style:{marginLeft:"auto"},variant:"outline-danger",onClick:function(a){return function(e,a){e.preventDefault(),h.delete(a).then((function(e){i()})).catch((function(e){console.log(e)}))}(a,e.id)},children:"Delete"})})]},a)}))})};var w=function(){var e=Object(c.useState)(),a=Object(d.a)(e,2),t=a[0],r=a[1];function n(e,a){e.preventDefault(),r({cardData:a}),console.log("card data coming from update button",a)}return console.log(t+"thisis app"),Object(S.jsxs)("div",{children:[Object(S.jsx)(E,{sendCard:t,onAddCard:n}),Object(S.jsx)(k,{onUpdateClick:n}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"container mt-3"})})]})};n.a.render(Object(S.jsx)(i.a,{children:Object(S.jsx)(w,{})}),document.getElementById("root"))},55:function(e,a,t){},88:function(e,a,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.ad899ef3.chunk.js.map